<?phpini_set("auto_detect_line_endings", true);$lines = file("collated.csv");$threshold = 10;$out = "p,c";for($j = 0; $j < $threshold; $j++) {	$out .= "," . ($j + 1);}$out .= "\n";for($i = 0; $i < count($lines); $i++){	if($i == 0)		continue; // Skip the header row	$arr = explode(",", $lines[$i]);	$out .= "$arr[0],$arr[1]";	for($j = 0; $j < $threshold; $j++) {		// Loop trough all the elements and compute the sum for that threshold.		$total = 0;		for($k = 0; $k < count($arr); $k++) {			if($k < 2)				continue; // Skip the PID and the condition			else if($arr[$k] > $j)				$total++;		}		$out .= ",$total"; 		//echo "Line $i Threshold $j Total $total<br />";	}	$out .= "\n";}echo nl2br($out);$handle = fopen("threshold_collated.csv", "w");fwrite($handle, $out);fclose($handle);// for($j = 1; $j < $thresholdLimit; $j++) {// 	$ts[$j] = array();// 	for($i = 1; $i < count($lines); $i++) {// 		$lineArr = explode(",", $lines[$i]);// 		$out = array();// 		$runningTotal = 0;// 		for($k = 0; $k < count($lineArr); $k++) {// 			if($k < 2) {// 				array_push($out, $lineArr[$k]);// 			} else if($lineArr[$k] >= $j) {// 				array_push($out, 1);// 				$runningTotal++;// 			} else {// 				array_push($out, 0);// 			}// 		}// 		array_push($out, $runningTotal);// 		array_push($ts[$j], $out);// 		print_r($out);// 		break;// 	}// 	break;// }// print_r($ts[1]);/*for($i = 1; $i < $thresholdLimit; $i++) {	// Write everything out to a file	$out = "$lines[0]\n";	$tt = $ts[$i];	foreach ($tt as $t) {		$out .= "$t\n";	}	$handle = fopen("data/" . $i . "_5.csv", "w");	fwrite($handle, $out);	fclose($handle);}*/// Now I need to re-write based on the number of things found per thresholds?>